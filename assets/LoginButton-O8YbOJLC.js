import{u as f,r as w,a as y,j as e,B as c,L as r,A as l,m as t,X as N,I as x}from"./index-CKo-4-jp.js";const k=()=>{const{signIn:h,loading:p}=f(),[u,i]=w.useState(!1),{register:o,handleSubmit:b,formState:{errors:s,isSubmitting:a},reset:n}=y({mode:"onBlur"}),g=async m=>{try{await h(m.email.trim(),m.password),i(!1),n()}catch(j){console.error("Грешка при влизане:",j)}},d=()=>{i(!1),n()};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{onClick:()=>i(!0),disabled:p,variant:"default",className:"cursor-pointer gap-2 shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsx(r,{className:"w-4 h-4"}),"Вход"]}),e.jsx(l,{children:u&&e.jsxs(e.Fragment,{children:[e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40",onClick:d}),e.jsxs(t.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.2,ease:"easeOut"},className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl shadow-2xl z-50 w-[calc(100%-2rem)] max-w-md",children:[e.jsxs("div",{className:"relative bg-linear-to-br from-rose-600 to-red-600 rounded-t-2xl px-4 sm:px-6 py-6 sm:py-8 text-white",children:[e.jsx("button",{onClick:d,type:"button",className:"absolute top-3 right-3 sm:top-4 sm:right-4 p-2 rounded-full hover:bg-white/20 transition-colors duration-200","aria-label":"Затвори",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3 pr-10",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-2.5 sm:p-3 rounded-xl",children:e.jsx(r,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold",children:"Добре дошли"}),e.jsx("p",{className:"text-red-100 text-xs sm:text-sm mt-0.5 sm:mt-1",children:"Влезте във вашия акаунт"})]})]})]}),e.jsxs("form",{onSubmit:b(g),className:"p-4 sm:p-6 space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-semibold text-gray-700 block",children:"Имейл адрес"}),e.jsx(x,{id:"email",type:"email",...o("email",{required:"Имейлът е задължителен",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Невалиден имейл адрес"}}),placeholder:"your@email.com",disabled:a,autoFocus:!0,"aria-invalid":s.email?"true":"false",className:`transition-all duration-200 ${s.email?"border-red-500 focus:ring-red-500/20":"focus:ring-rose-500/20"}`}),e.jsx(l,{children:s.email&&e.jsxs(t.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-red-600 text-xs font-medium flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-1 h-1 bg-red-600 rounded-full"}),s.email.message]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-semibold text-gray-700 block",children:"Парола"}),e.jsx(x,{id:"password",type:"password",...o("password",{required:"Паролата е задължителна",minLength:{value:6,message:"Паролата трябва да е поне 6 символа"}}),placeholder:"••••••••",disabled:a,"aria-invalid":s.password?"true":"false",className:`transition-all duration-200 ${s.password?"border-red-500 focus:ring-red-500/20":"focus:ring-rose-500/20"}`}),e.jsx(l,{children:s.password&&e.jsxs(t.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-red-600 text-xs font-medium flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-1 h-1 bg-red-600 rounded-full"}),s.password.message]})})]}),e.jsx(c,{type:"submit",className:"w-full cursor-pointer h-10 sm:h-11 text-sm sm:text-base font-semibold bg-linear-to-r from-rose-600 to-red-600 hover:from-rose-700 hover:to-red-700 shadow-lg hover:shadow-xl transition-all duration-200 mt-4 sm:mt-6",disabled:a,children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Влизане..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{children:"Влизане"})]})})]})]})]})})]})};export{k as LoginButton};
